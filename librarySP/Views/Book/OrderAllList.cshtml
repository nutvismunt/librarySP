@using System.Reflection
@model IEnumerable<librarySP.Database.Entities.Order>
<form asp-controller="Book" asp-action="OrderAllList">
    <p>
        <input type="search" name="SearchString">
        <select name="search" asp-items="@(Html.GetEnumSelectList(typeof(librarySP.Database.enums.SearchOrders)))"></select>
        <input type="submit" value="Поиск" />
    </p>
</form>
<table class="table" width="100%">
    <tr>
        <td>ID заказа</td>
        <td>ID книги</td>
        <td>Название книги</td>
        <td>Количество</td>
        <td>Почта</td>
        <td>Номер</td>
        <td>Пользователь</td>
        <td>Статус</td>

    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>@item.OrderId</td>
            <td>@item.BookId</td>
            <td>@item.Book.BookName </td>

            <td>@item.Amount</td>

            <td>@item.UserName</td>
            <td>@item.ClientPhoneNum</td>
            <td>@item.ClientNameSurName</td>
            <td>
                <label asp-for="@item.OrderStatus"></label>
                @switch (item.OrderStatus)
                {
                    case 0:<label>Забронирован</label>; break;
                    case (librarySP.Database.enums.OrderStatus)1: <label>Ожидает</label>; break;
                    case (librarySP.Database.enums.OrderStatus)2: <label>Выдан</label>; break;
                }
            </td>

            <td>
                <form asp-controller="Book" asp-action="DeleteOrder" asp-route-id="@item.OrderId" method="post">
                    <div class="form-group">
                        <input type="hidden" id="bookIdHolder" value="@item.Book.Id" name="bookIdHolder" />
                        @if (item.OrderStatus == (librarySP.Database.enums.OrderStatus)1)
                    {<input type="submit" class="btn btn-default" value="Отказать" />}
                @if (item.OrderStatus == (librarySP.Database.enums.OrderStatus)2)
                {<input type="submit" class="btn btn-default" value="Вернуть книгу" />}

                    </div>
                </form>

                @if (item.OrderStatus == (librarySP.Database.enums.OrderStatus)1)
                {<form asp-controller="Book" asp-action="GivingBook" asp-route-id="@item.OrderId" method="post">
                        <div class="form-group">
                            <input type="submit" class="btn btn-default" value="Выдача" />
                        </div>
                    </form>}

            </td>

        </tr>


    }
</table>
